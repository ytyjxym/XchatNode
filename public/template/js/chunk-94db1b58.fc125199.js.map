{"version":3,"sources":["webpack:///./src/components/Setting.vue?20a8","webpack:///src/components/Setting.vue","webpack:///./src/components/Setting.vue?9d70","webpack:///./src/components/Setting.vue","webpack:///./src/components/Setting.vue?3258"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","staticStyle","userPhoto","baseUrl","own","data","icon","on","choseUserPhoto","_v","directives","name","rawName","value","expression","domProps","$event","target","composing","oldPassword","newPassword","checkNewPassword","_s","msg","reset","staticRenderFns","username","file","components","computed","methods","$store","window","URL","createObjectURL","e","files","beforeRouteEnter","store","next","mounted","component"],"mappings":"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","file":"js/chunk-94db1b58.fc125199.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setting\"},[_c('form',{staticClass:\"form-signin\"},[_vm._m(0),_c('div',{staticClass:\"regist__div--userPhoto text-center\"},[_c('label',{attrs:{\"for\":\"regist__div--userPhoto--file\"}},[_c('img',{staticStyle:{\"border-radius\":\"50%\",\"cursor\":\"pointer\"},attrs:{\"src\":_vm.userPhoto ? _vm.userPhoto : (_vm.baseUrl + _vm.own.data.icon),\"width\":\"60\",\"height\":\"60\"}})]),_c('input',{staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"id\":\"regist__div--userPhoto--file\"},on:{\"input\":_vm.choseUserPhoto}})]),_c('div',{staticClass:\"form-label-group\"},[_c('label',{attrs:{\"for\":\"inputEmail\"}},[_vm._v(\"昵称修改\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"type\":\"name\",\"id\":\"inputName\",\"placeholder\":\"请输入昵称\",\"required\":\"\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_c('div',{staticClass:\"form-label-group\"},[_c('label',{attrs:{\"for\":\"inputOldPassword\"}},[_vm._v(\"旧密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.oldPassword),expression:\"oldPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"inputOldPassword\",\"placeholder\":\"请输入旧密码\",\"required\":\"\"},domProps:{\"value\":(_vm.oldPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.oldPassword=$event.target.value}}})]),_c('div',{staticClass:\"form-label-group\"},[_c('label',{attrs:{\"for\":\"inputNewPassword\"}},[_vm._v(\"请输入新密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"inputNewPassword\",\"placeholder\":\"请再输入一次密码\",\"required\":\"\"},domProps:{\"value\":(_vm.newPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newPassword=$event.target.value}}})]),_c('div',{staticClass:\"form-label-group\"},[_c('label',{attrs:{\"for\":\"inputCheckNewPassword\"}},[_vm._v(\"请再输入一次新密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkNewPassword),expression:\"checkNewPassword\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"inputCheckNewPassword\",\"placeholder\":\"请再输入一次密码\",\"required\":\"\"},domProps:{\"value\":(_vm.checkNewPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.checkNewPassword=$event.target.value}}})]),_c('div',{staticClass:\"checkbox mb-3\"},[_c('label',[_vm._v(_vm._s(_vm.msg))])]),_c('button',{staticClass:\"btn btn-lg btn-success btn-block\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.reset}},[_vm._v(\"提交\")])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center mb-4\"},[_c('h1',{staticClass:\"h3 mb-3 font-weight-normal\"},[_vm._v(\"修改资料\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"setting\">\r\n    <form class=\"form-signin\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">修改资料</h1>\r\n      </div>\r\n      <div class=\"regist__div--userPhoto text-center\">\r\n        <label for=\"regist__div--userPhoto--file\">\r\n          <img\r\n            :src=\"userPhoto ? userPhoto : (baseUrl + own.data.icon)\"\r\n            width=\"60\"\r\n            height=\"60\"\r\n            style=\"border-radius:50%;cursor:pointer\"\r\n          />\r\n        </label>\r\n        <input\r\n          type=\"file\"\r\n          id=\"regist__div--userPhoto--file\"\r\n          style=\"display:none\"\r\n          @input=\"choseUserPhoto\"\r\n        />\r\n      </div>\r\n      <div class=\"form-label-group\">\r\n        <label for=\"inputEmail\">昵称修改</label>\r\n        <input\r\n          v-model=\"name\"\r\n          type=\"name\"\r\n          id=\"inputName\"\r\n          class=\"form-control\"\r\n          placeholder=\"请输入昵称\"\r\n          required\r\n          autofocus\r\n        />\r\n      </div>\r\n      <div class=\"form-label-group\">\r\n        <label for=\"inputOldPassword\">旧密码</label>\r\n        <input\r\n          v-model=\"oldPassword\"\r\n          type=\"password\"\r\n          id=\"inputOldPassword\"\r\n          class=\"form-control\"\r\n          placeholder=\"请输入旧密码\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-label-group\">\r\n        <label for=\"inputNewPassword\">请输入新密码</label>\r\n        <input\r\n          v-model=\"newPassword\"\r\n          type=\"password\"\r\n          id=\"inputNewPassword\"\r\n          class=\"form-control\"\r\n          placeholder=\"请再输入一次密码\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"form-label-group\">\r\n        <label for=\"inputCheckNewPassword\">请再输入一次新密码</label>\r\n        <input\r\n          v-model=\"checkNewPassword\"\r\n          type=\"password\"\r\n          id=\"inputCheckNewPassword\"\r\n          class=\"form-control\"\r\n          placeholder=\"请再输入一次密码\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"checkbox mb-3\">\r\n        <label>{{msg}}</label>\r\n      </div>\r\n      <button class=\"btn btn-lg btn-success btn-block\" type=\"button\" @click=\"reset\">提交</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n<script>\r\n// @ is an alias to /src\r\nimport { mapState } from \"vuex\";\r\nimport store from \"../plugins/store\";\r\nexport default {\r\n  name: \"Setting\",\r\n  // props: [\"friendId\", \"name\", \"list\"],\r\n  // props: [\"oldIcon\"],\r\n  data() {\r\n    return {\r\n      name: \"\",\r\n      username: \"\",\r\n      oldPassword: \"\",\r\n      newPassword: \"\",\r\n      checkNewPassword: \"\",\r\n      msg: \"\",\r\n      userPhoto: \"\",\r\n      file: \"\"\r\n    };\r\n  },\r\n  components: {},\r\n  computed: mapState([\"own\"]),\r\n  methods: {\r\n    reset() {\r\n      if (this.newPassword !== this.checkNewPassword) {\r\n        this.msg = \"两次密码不一致\";\r\n        return;\r\n      }\r\n      this.$store\r\n        .dispatch(\"RESET\", {\r\n          name: this.name,\r\n          oldPassword: this.oldPassword,\r\n          newPassword: this.newPassword,\r\n          file: this.file\r\n        })\r\n        .then(res => {\r\n          this.msg = res.msg;\r\n          if (res.err === 0) {\r\n            this.name = \"\";\r\n            this.username = \"\";\r\n            this.oldPassword = \"\";\r\n            this.newPassword = \"\";\r\n            this.checkNewPassword = \"\";\r\n          }\r\n        });\r\n\r\n      // let data = new FormData();\r\n      // data.append(\"newName\", this.name);\r\n      // data.append(\"oldPassword\", this.oldPassword);\r\n      // data.append(\"newPassword\", this.newPassword);\r\n      // data.append(\"icon\", this.file);\r\n      // axios({\r\n      //   url: \"/api/setUser\",\r\n      //   method: \"post\",\r\n      //   data\r\n      // }).then(res => {\r\n      //   this.msg = res.data.msg;\r\n      //   if (res.data.err === 0) {\r\n      //     setTimeout(() => {\r\n      //       this.$router.go(\"/home\");\r\n      //     }, 500);\r\n      //   }\r\n      // });\r\n    },\r\n\r\n    choseUserPhoto(e) {\r\n      this.userPhoto = window.URL.createObjectURL(e.target.files[0]);\r\n      this.file = e.target.files[0];\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    if (store.state.own.err === 0) {\r\n      next();\r\n    } else {\r\n      next(\"/login\");\r\n    }\r\n    // axios({\r\n    //   url: \"/api/loginTest\"\r\n    // }).then(res => {\r\n    //   // if (res.data.err === 0) {\r\n    //   if (store.state.own.err === 0) {\r\n    //     next();\r\n    //     // next(_this => {\r\n    //     //   _this.name = res.data.data.name;\r\n    //     //   _this.icon = res.data.data.icon;\r\n    //     //   _this.id = res.data.data._id;\r\n    //     // });\r\n    //   } else {\r\n    //     next(\"/login\");\r\n    //   }\r\n    // });\r\n  },\r\n  mounted() {}\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.setting form {\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateX(-50%) translateY(-50%);\r\n  width: 450px;\r\n  height: 650px;\r\n  border-radius: 5px;\r\n  padding: 30px 25px 0 25px;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Setting.vue?vue&type=template&id=308b36c2&scoped=true&\"\nimport script from \"./Setting.vue?vue&type=script&lang=js&\"\nexport * from \"./Setting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Setting.vue?vue&type=style&index=0&id=308b36c2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"308b36c2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=style&index=0&id=308b36c2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=style&index=0&id=308b36c2&lang=scss&scoped=true&\""],"sourceRoot":""}